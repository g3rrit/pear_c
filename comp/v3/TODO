TODO

-- if struct is local let functions inside struct be local too
-- solve this by having a global state objects 
-- let functions inside struct be prefixed with __structname_

